<app-header></app-header>
<div class="bg-color">
  <div class="container">
    <div class="row shift">
      <div class="col-md-3"></div>
      <div class="col-md-6">
        <h3 style="font-size: 40px; text-align: center;">Register Employee</h3>
        <hr>
        <br>
        <form [formGroup]="registerForm" (ngSubmit)="btnClick()">

          <!-- Name -->

          <div class="form-group">
            <label for="name">
              <span class="change">
                <span class="fat">|</span>Name</span>
            </label>
            <input type="text" class="form-control" formControlName="name" placeholder="Enter Name">
            <div *ngIf="registerForm.controls['name'].hasError('required') && registerForm.controls['name'].touched" class="alert alert-danger">
              <small>
                <i>You must include a Full name.</i>
              </small>
            </div>
            <div *ngIf="registerForm.controls['name'].hasError('minlength') && registerForm.controls['name'].touched" class="alert alert-danger">
              <small>
                <i>Your name must be at least 4 characters long.</i>
              </small>
            </div>
          </div>

          <!-- Gender -->

          <div class="form-group">
            <label for="gender">
              <span class="change">
                <span class="fat">|</span> Gender</span>
            </label>
            <br />
            <label for="male">Male</label>
            <input type="radio" formControlName="gender" value="male" />
            <label for="female" class="move-right">Female</label>
            <input type="radio" formControlName="gender" value="female" />
          </div>

          <!-- Email -->

          <div class="form-group">
            <label for="Email">
              <span class="change">
                <span class="fat">|</span> Email Id</span>
            </label>
            <input type="email" class="form-control" formControlName="email" placeholder="johndoe@example.com" required />
            <div *ngIf="registerForm.controls['email'].hasError('required') && registerForm.controls['email'].touched" class="alert alert-danger">
              <small>
                <i>Please enter your complete Email Address</i>
              </small>
            </div>
            <div *ngIf="registerForm.controls['email'].hasError('email') && registerForm.controls['email'].touched" class="alert alert-danger">
              <small>
                <i>Email is invalid</i>
              </small>
            </div>
          </div>

          <!-- Joining Date -->

          <div class="form-group">
            <label for="jdate">
              <span class="change">
                <span class="fat">|</span> Joining Date</span>
            </label>
            <input type="date" class="form-control" formControlName="jdate" required />
            <div *ngIf="registerForm.controls['jdate'].hasError('required') && registerForm.controls['jdate'].touched" class="alert alert-danger">
              <small>
                <i> Please enter your Joining date</i>
              </small>
            </div>
          </div>

          <!-- Contact -->

          <div class="form-group">
            <label for="contact">
              <span class="change">
                <span class="fat">|</span> Contact</span>
            </label>
            <input type="number" class="form-control" formControlName="contact" placeholder="Contact" required minlength="10" maxlength="10"
            />
            <div *ngIf="registerForm.controls['contact'].hasError('required') && registerForm.controls['contact'].touched" class="alert alert-danger">
              <small>
                <i>Please enter your contact details</i>
              </small>
            </div>
            <div *ngIf="registerForm.controls['contact'].hasError('minlength') && registerForm.controls['contact'].touched" class="alert alert-danger">
              <small>
                <i>The mobile number should be of 10 digits only</i>
              </small>
            </div>
            <div *ngIf="registerForm.controls['contact'].hasError('minlength') && registerForm.controls['contact'].touched" class="alert alert-danger">
              <small>
                <i>The mobile number should be of 10 digits only</i>
              </small>
            </div>
          </div>

          <!-- Employee Role -->
          <label for="contact">
              <span class="change">
                <span class="fat">|</span> Employee Roles</span>
          </label>

          <div formArrayName="employeeRole">
            <div *ngFor="let employeeRole of registerForm.controls.employeeRole.controls; let i=index" class="panel panel-default">
              <br>
              <label for="employeeRole">
                <span class="change text-muted">Employee Role {{i + 1}}</span>
              </label>

              <div class="container" [formGroupName]="i">
                <div class="row">
                  <div class="col-md-6 form-group">
                    <label for="departmentId" class="text-muted">Department</label>
                    <input formControlName="departmentId" class="form-control">
                    <div *ngIf="registerForm.controls.employeeRole.controls[i].controls.departmentId.hasError('required') && registerForm.controls.employeeRole.controls[i].controls.departmentId.touched"
                      class="alert alert-danger">
                      <small>
                        <i>Please select Department Id</i>
                      </small>
                    </div>
                  </div>
                  <div class="col-md-6 form-group">
                    <label for="roleId" class="text-muted">Role</label>
                    <input formControlName="roleId" class="form-control">
                    <div *ngIf="registerForm.controls.employeeRole.controls[i].controls.roleId.hasError('required') && registerForm.controls.employeeRole.controls[i].controls.roleId.touched"
                      class="alert alert-danger">
                      <small>
                        <i>Please select Role Id</i>
                      </small>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="container">
            <button type="button" (click)="addEmployeeRole()" class="btn btn-primary makeChange">Add Role <span class="fat">+</span></button>
          </div>


          <br>
          <!-- Employee Register Button -->

          <button type="submit" name="register" class="btn-self" [disabled]="registerForm.invalid">
            Submit
          </button>
          <br>
        </form>
      </div>
      <div class="col-md-3"></div>
    </div>
  </div>
</div>
<app-footer></app-footer>